#!/bin/bash

REPO_URL="https://github.com/wekan/wekan.git"
VULNERABLE_TAG="v8.15"
TARGET_DIR="$(dirname "$0")/source_code"

if [ -d "$TARGET_DIR" ]; then
    echo "[*] Source code directory already exists, skipping clone"
    exit 0
fi

echo "[*] Cloning Wekan repository..."
git clone --depth 1 --branch "$VULNERABLE_TAG" "$REPO_URL" "$TARGET_DIR"

if [ $? -eq 0 ]; then
    echo "[+] Successfully cloned Wekan $VULNERABLE_TAG to $TARGET_DIR"
else
    echo "[-] Failed to clone repository"
    exit 1
fi
