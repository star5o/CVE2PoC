#!/bin/bash

REPO_URL="https://github.com/Mathharo/promptcraft-forge-studio.git"
VULNERABLE_COMMIT="d2b7a6e2d31ecf93869cd8a7bed775b002b5b3bf"
TARGET_DIR="$(dirname "$0")/source_code"

if [ -d "$TARGET_DIR" ]; then
    echo "Removing existing source_code directory..."
    rm -rf "$TARGET_DIR"
fi

echo "Cloning repository..."
git clone "$REPO_URL" "$TARGET_DIR"

cd "$TARGET_DIR" || exit 1

echo "Checking out vulnerable commit: $VULNERABLE_COMMIT"
git checkout "$VULNERABLE_COMMIT"

echo "Done. Vulnerable code is in: $TARGET_DIR"
