FROM debian:bullseye-slim

RUN apt-get update && apt-get install -y \
    build-essential \
    wget \
    autoconf \
    automake \
    libtool \
    pkg-config \
    libssl-dev \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /build

RUN wget https://www.zlib.net/fossils/zlib-1.2.0.3.tar.gz && \
    tar xzf zlib-1.2.0.3.tar.gz && \
    cd zlib-1.2.0.3 && \
    ./configure --prefix=/usr/local && \
    make && make install && \
    ldconfig

RUN wget https://curl.se/download/curl-8.11.1.tar.gz && \
    tar xzf curl-8.11.1.tar.gz && \
    cd curl-8.11.1 && \
    ./configure --prefix=/usr/local --with-zlib=/usr/local --with-openssl \
        --without-libpsl --disable-ldap --disable-ldaps && \
    make && make install && \
    ldconfig

ENV LD_LIBRARY_PATH=/usr/local/lib

CMD ["tail", "-f", "/dev/null"]
