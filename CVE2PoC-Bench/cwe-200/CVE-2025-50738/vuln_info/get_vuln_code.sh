#!/bin/bash
REPO_URL="https://github.com/usememos/memos.git"
VULNERABLE_TAG="v0.24.3"
TARGET_DIR="$(dirname "$0")/source_code"

if [ -d "$TARGET_DIR" ]; then
    echo "Removing existing source_code directory..."
    rm -rf "$TARGET_DIR"
fi

echo "Cloning $REPO_URL..."
git clone --depth 1 --branch "$VULNERABLE_TAG" "$REPO_URL" "$TARGET_DIR"

echo "Done. Source code is at $TARGET_DIR"
