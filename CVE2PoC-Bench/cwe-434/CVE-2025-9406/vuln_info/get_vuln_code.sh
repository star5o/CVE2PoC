#!/bin/bash
REPO_URL="https://github.com/xuhuisheng/lemon.git"
VULNERABLE_TAG="lemon-1.13.0"
TARGET_DIR="$(dirname "$0")/source_code"

if [ -d "$TARGET_DIR" ]; then
    echo "Source code directory already exists, removing..."
    rm -rf "$TARGET_DIR"
fi

echo "Cloning repository..."
git clone "$REPO_URL" "$TARGET_DIR"

cd "$TARGET_DIR"
git checkout "$VULNERABLE_TAG"

echo "Source code is ready at $TARGET_DIR (tag: $VULNERABLE_TAG)"
