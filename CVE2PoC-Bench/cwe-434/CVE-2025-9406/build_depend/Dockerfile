FROM maven:3.6.3-openjdk-8

WORKDIR /app

RUN git clone https://github.com/xuhuisheng/lemon.git . && \
    git checkout lemon-1.13.0

RUN mv src/main/java/com/mossle/client/notification/SendmsgClient.java \
       src/main/java/com/mossle/client/notification/SendMsgClient.java

RUN mvn dependency:go-offline -B || true

EXPOSE 8080

CMD ["mvn", "jetty:run", "-Djetty.port=8080"]
