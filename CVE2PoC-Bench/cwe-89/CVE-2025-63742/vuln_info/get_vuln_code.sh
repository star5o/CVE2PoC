#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SOURCE_DIR="${SCRIPT_DIR}/source_code"

if [ -d "${SOURCE_DIR}" ]; then
    echo "Source code directory already exists, removing..."
    rm -rf "${SOURCE_DIR}"
fi

echo "Cloning RockOA repository..."
git clone https://github.com/rainrocka/xinhu.git "${SOURCE_DIR}"

cd "${SOURCE_DIR}"

git log --oneline -20

echo ""
echo "Source code downloaded to: ${SOURCE_DIR}"
echo "Note: The repository contains vulnerable code in webmain/task/api/loginAction.php"
