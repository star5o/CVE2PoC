FROM maven:3.6-jdk-8 AS builder
WORKDIR /build
COPY vuln_info/source_code/jshERP-boot /build
RUN mvn clean package -DskipTests -q

FROM eclipse-temurin:8-jdk
WORKDIR /app
RUN apt-get update && apt-get install -y netcat-openbsd && rm -rf /var/lib/apt/lists/*
COPY --from=builder /build/target/jshERP.jar /app/jshERP.jar
COPY build_depend/entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh
EXPOSE 9999
ENTRYPOINT ["/app/entrypoint.sh"]
