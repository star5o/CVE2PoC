#!/bin/bash
until nc -z mysql 3306; do
    echo "Waiting for MySQL..."
    sleep 2
done
echo "MySQL is ready, starting jshERP..."
java -jar /app/jshERP.jar \
    --spring.datasource.url="jdbc:mysql://mysql:3306/jsh_erp?useUnicode=true&characterEncoding=utf8&useCursorFetch=true&defaultFetchSize=500&allowMultiQueries=true&rewriteBatchedStatements=true&useSSL=false&allowPublicKeyRetrieval=true" \
    --spring.datasource.username=root \
    --spring.datasource.password=root123 \
    --spring.redis.host=redis \
    --spring.redis.password=redis123
