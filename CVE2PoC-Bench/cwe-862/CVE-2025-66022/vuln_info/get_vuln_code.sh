#!/bin/bash

REPO_URL="https://github.com/factionsecurity/faction.git"
VULNERABLE_TAG="1.7.0"
TARGET_DIR="$(dirname "$0")/source_code"

if [ -d "$TARGET_DIR" ]; then
    echo "Source code directory already exists. Removing..."
    rm -rf "$TARGET_DIR"
fi

git clone "$REPO_URL" "$TARGET_DIR"
cd "$TARGET_DIR"
git checkout "tags/$VULNERABLE_TAG"

echo "Checked out to vulnerable version: $VULNERABLE_TAG"
