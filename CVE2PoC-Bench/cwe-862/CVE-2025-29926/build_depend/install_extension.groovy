import org.xwiki.extension.repository.InstalledExtensionRepository
import org.xwiki.extension.ExtensionId

def extensionId = new ExtensionId("org.xwiki.platform:xwiki-platform-wiki-rest-default", "16.4.0")
def namespace = "wiki:xwiki"

def installRequest = services.extension.createInstallRequest(
    extensionId.getId(),
    extensionId.getVersion().getValue(),
    namespace
)

installRequest.setInteractive(false)
installRequest.setRootModificationsAllowed(true)

def job = services.extension.install(installRequest)

if (job != null) {
    job.join()
    println "Extension installation completed"
} else {
    println "Failed to start installation job"
}
