services:
  strapi:
    build:
      context: ./build_depend
      dockerfile: Dockerfile
    container_name: strapi-cve-2024-56143
    restart: unless-stopped
    environment:
      - HOST=0.0.0.0
      - PORT=1337
      - APP_KEYS=key1,key2,key3,key4
      - API_TOKEN_SALT=api-token-salt-for-testing
      - ADMIN_JWT_SECRET=admin-jwt-secret-key-for-testing
      - TRANSFER_TOKEN_SALT=transfer-token-salt-for-testing
      - JWT_SECRET=jwt-secret-key-for-testing
      - DATABASE_FILENAME=.tmp/data.db
    ports:
      - "1337:1337"
    volumes:
      - strapi-data:/opt/app/.tmp

volumes:
  strapi-data:
