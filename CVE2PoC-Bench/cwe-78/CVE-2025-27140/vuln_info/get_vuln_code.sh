#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TARGET_DIR="${SCRIPT_DIR}/source_code"

REPO_URL="https://github.com/LabRedesCefetRJ/WeGIA.git"
VULNERABLE_COMMIT="3ade48a9~1"

rm -rf "${TARGET_DIR}"
mkdir -p "${TARGET_DIR}"

git clone "${REPO_URL}" "${TARGET_DIR}"
cd "${TARGET_DIR}"
git checkout "${VULNERABLE_COMMIT}"

echo "Source code checked out to vulnerable version at ${TARGET_DIR}"
