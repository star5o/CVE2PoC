SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

USE `wegia`;

CREATE TABLE IF NOT EXISTS `acao` (
  `id_acao` INT(11) NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(240) NULL DEFAULT NULL,
  PRIMARY KEY (`id_acao`))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `pessoa` (
  `id_pessoa` INT(11) NOT NULL AUTO_INCREMENT,
  `cpf` VARCHAR(120) NOT NULL,
  `senha` VARCHAR(70) NULL DEFAULT NULL,
  `nome` VARCHAR(100) NULL DEFAULT NULL,
  `sobrenome` VARCHAR(100) NULL DEFAULT NULL,
  `sexo` CHAR(1) NULL DEFAULT NULL,
  `telefone` VARCHAR(25) NULL DEFAULT NULL,
  `data_nascimento` DATE NULL DEFAULT NULL,
  `imagem` LONGTEXT NULL DEFAULT NULL,
  `cep` VARCHAR(10) NULL DEFAULT NULL,
  `estado` VARCHAR(5) NULL DEFAULT NULL,
  `cidade` VARCHAR(40) NULL DEFAULT NULL,
  `bairro` VARCHAR(40) NULL DEFAULT NULL,
  `logradouro` VARCHAR(100) NULL DEFAULT NULL,
  `numero_endereco` VARCHAR(80) NULL DEFAULT NULL,
  `complemento` VARCHAR(50) NULL DEFAULT NULL,
  `ibge` VARCHAR(20) NULL DEFAULT NULL,
  `registro_geral` VARCHAR(120) NULL DEFAULT NULL,
  `orgao_emissor` VARCHAR(120) NULL DEFAULT NULL,
  `data_expedicao` DATE NULL DEFAULT NULL,
  `nome_mae` VARCHAR(100) NULL DEFAULT NULL,
  `nome_pai` VARCHAR(100) NULL DEFAULT NULL,
  `tipo_sanguineo` VARCHAR(5) NULL DEFAULT NULL,
  `nivel_acesso` TINYINT(4) NULL DEFAULT '0',
  `adm_configurado` TINYINT(4) NULL DEFAULT '0',
  UNIQUE INDEX (`cpf` ASC),
  PRIMARY KEY (`id_pessoa`))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `cargo` (
  `id_cargo` INT(11) NOT NULL AUTO_INCREMENT,
  `cargo` VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (`id_cargo`),
  UNIQUE INDEX `cargo` (`cargo` ASC))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `situacao` (
  `id_situacao` INT(11) NOT NULL AUTO_INCREMENT,
  `situacoes` VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (`id_situacao`),
  UNIQUE INDEX `situacoes` (`situacoes` ASC))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `funcionario` (
  `id_funcionario` INT(11) NOT NULL AUTO_INCREMENT,
  `id_pessoa` INT(11) NOT NULL,
  `id_cargo` INT(11) NULL DEFAULT NULL,
  `data_cadastro` DATE NULL DEFAULT NULL,
  `id_situacao` INT(11) NULL DEFAULT NULL,
  `observacoes` TEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id_funcionario`),
  INDEX `fk_funcionario_pessoa_idx` (`id_pessoa` ASC),
  INDEX `fk_funcionario_cargo1_idx` (`id_cargo` ASC),
  INDEX `fk_funcionario_situacao1_idx` (`id_situacao` ASC))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `recurso` (
  `id_recurso` INT(11) NOT NULL AUTO_INCREMENT,
  `recurso` VARCHAR(50) NULL DEFAULT NULL,
  PRIMARY KEY (`id_recurso`))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `permissao` (
  `id_permissao` INT(11) NOT NULL AUTO_INCREMENT,
  `id_cargo` INT(11) NOT NULL,
  `id_recurso` INT(11) NOT NULL,
  `id_acao` INT(11) NOT NULL,
  PRIMARY KEY (`id_permissao`),
  INDEX `fk_permissao_cargo1_idx` (`id_cargo` ASC),
  INDEX `fk_permissao_recurso1_idx` (`id_recurso` ASC),
  INDEX `fk_permissao_acao1_idx` (`id_acao` ASC))
ENGINE = InnoDB;

INSERT INTO `acao` (`id_acao`, `descricao`) VALUES (1, 'Visualizar'), (2, 'Editar'), (3, 'Excluir');
INSERT INTO `cargo` (`id_cargo`, `cargo`) VALUES (1, 'Administrador');
INSERT INTO `situacao` (`id_situacao`, `situacoes`) VALUES (1, 'Ativo');
INSERT INTO `recurso` (`id_recurso`, `recurso`) VALUES (9, 'Configuracao');
INSERT INTO `pessoa` (`id_pessoa`, `cpf`, `senha`, `nome`, `sobrenome`, `nivel_acesso`, `adm_configurado`) VALUES (1, 'admin', SHA2('admin123', 256), 'Admin', 'User', 3, 1);
INSERT INTO `funcionario` (`id_funcionario`, `id_pessoa`, `id_cargo`, `id_situacao`) VALUES (1, 1, 1, 1);
INSERT INTO `permissao` (`id_permissao`, `id_cargo`, `id_recurso`, `id_acao`) VALUES (1, 1, 9, 3);

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
