#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SOURCE_DIR="${SCRIPT_DIR}/source_code"

if [ -d "$SOURCE_DIR" ]; then
    echo "Source code directory already exists. Removing..."
    rm -rf "$SOURCE_DIR"
fi

mkdir -p "$SOURCE_DIR"

echo "Cloning White-Jotter repository..."
git clone https://github.com/Antabot/White-Jotter.git "$SOURCE_DIR"

cd "$SOURCE_DIR"

echo "Checking out vulnerable commit 9bcadcf..."
git checkout 9bcadcf 2>/dev/null || git checkout master

echo "Done. Source code is available at: $SOURCE_DIR"
