#!/bin/bash
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SOURCE_DIR="${SCRIPT_DIR}/source_code"

if [ -d "$SOURCE_DIR" ]; then
    echo "Source code directory already exists, removing..."
    rm -rf "$SOURCE_DIR"
fi

echo "Cloning WeGIA repository..."
git clone https://github.com/LabRedesCefetRJ/WeGIA.git "$SOURCE_DIR"

cd "$SOURCE_DIR"
echo "Checking out vulnerable version v3.2.12..."
git checkout tags/v3.2.12

echo "Done. Source code is at: $SOURCE_DIR"
