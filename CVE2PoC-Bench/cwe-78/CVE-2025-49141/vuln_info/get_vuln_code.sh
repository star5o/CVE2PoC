#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TARGET_DIR="${SCRIPT_DIR}/source_code"

REPO_URL="https://github.com/haxtheweb/haxcms-php.git"
VULNERABLE_TAG="10.0.3"

rm -rf "${TARGET_DIR}"
mkdir -p "${TARGET_DIR}"

git clone --depth 1 --branch "${VULNERABLE_TAG}" "${REPO_URL}" "${TARGET_DIR}"

echo "Source code checked out to vulnerable version ${VULNERABLE_TAG} at ${TARGET_DIR}"
