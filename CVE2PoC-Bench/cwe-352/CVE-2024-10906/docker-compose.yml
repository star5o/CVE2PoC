version: '3.8'

services:
  dbgpt:
    image: eosphorosai/dbgpt:v0.6.0
    container_name: dbgpt-cve-2024-10906
    entrypoint: ["/bin/bash", "-c"]
    command:
      - |
        pip install 'langchain<0.2' 'langchain-community<0.2' openai --quiet
        python3 dbgpt/app/dbgpt_server.py --light --port 5670
    environment:
      - LOCAL_DB_TYPE=sqlite
      - LLM_MODEL=proxyllm
      - PROXY_API_KEY=sk-mock-api-key-for-testing
      - PROXY_SERVER_URL=https://api.openai.com/v1/chat/completions
      - EMBEDDING_MODEL=proxy_openai
      - proxy_openai_proxy_api_key=sk-mock-api-key-for-testing
      - LANGUAGE=en
    ports:
      - "5670:5670"
    restart: unless-stopped
