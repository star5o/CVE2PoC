#!/bin/bash

# Target directory
TARGET_DIR="source_code"

# Repo URL
REPO_URL="https://github.com/vercel/next.js.git"

# Vulnerable Tag for 14.x series (e.g., 14.2.24)
VULN_TAG="v14.2.24"

# Create source_code directory if it doesn't exist
if [ ! -d "$TARGET_DIR" ]; then
    echo "Cloning repository..."
    git clone $REPO_URL $TARGET_DIR
fi

cd $TARGET_DIR

# Checkout vulnerable version
echo "Checking out $VULN_TAG..."
git checkout $VULN_TAG

cd ..
echo "Done."
